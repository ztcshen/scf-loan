/**
 * Generated by skill: {{ generator_name }} v{{ generator_version }}
 * Since: {{ generated_at }}
 * Do not modify directly; regenerate via skills if changes are needed.
 * If manual changes are necessary, document @version, @since and change reasons in skill docs.
 */
package {{ package }};

import {{ service_package }}.{{ service_name }};
import {{ entity_package }}.{{ entity_name }};
import com.scf.loan.common.dto.PageResult;
import {{ package|replace('.biz.service.impl','') }}.common.dto.{{ entity_name|replace('Entity','PageDTO') }};
import {{ package|replace('.biz.service.impl','') }}.common.dto.{{ entity_name|replace('Entity','DTO') }};
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.mockito.Mock;
import org.mockito.MockitoAnnotations;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.util.ArrayList;
import java.util.List;

import static org.junit.jupiter.api.Assertions.*;
import static org.mockito.Mockito.*;

/**
 * {{ service_name }}单元测试
 */
public class {{ test_name }} {

    private static final Logger logger = LoggerFactory.getLogger({{ test_name }}.class);

    @Mock
    private {{ service_name }} {{ service_name|lower|replace('service', '') }}Service;

    @BeforeEach
    public void setUp() {
        MockitoAnnotations.openMocks(this);
    }

    /**
     * 测试批量创建{{ entity_name|replace('Entity', '') }}
     */
    @Test
    public void testBatchCreate{{ entity_name|replace('Entity', '') }}() {
        logger.info("开始执行测试批量创建{{ entity_name|replace('Entity', '') }}");
        
        List<{{ entity_name }}> entities = new ArrayList<>();
        
        // 创建测试数据
        {{ entity_name }} entity1 = new {{ entity_name }}();
        // 设置测试数据
        // entity1.setXXX(XXX);
        entities.add(entity1);
        
        {{ entity_name }} entity2 = new {{ entity_name }}();
        // 设置测试数据
        // entity2.setXXX(XXX);
        entities.add(entity2);
        
        // 模拟返回值
        when({{ service_name|lower|replace('service', '') }}Service.batchCreate{{ entity_name|replace('Entity', '') }}(entities)).thenReturn(true);
        
        boolean result = {{ service_name|lower|replace('service', '') }}Service.batchCreate{{ entity_name|replace('Entity', '') }}(entities);
        assertTrue(result);
        
        // 验证方法调用
        verify({{ service_name|lower|replace('service', '') }}Service, times(1)).batchCreate{{ entity_name|replace('Entity', '') }}(entities);
        
        logger.info("测试批量创建{{ entity_name|replace('Entity', '') }}执行完成");
    }

    /**
     * 测试批量更新{{ entity_name|replace('Entity', '') }}
     */
    @Test
    public void testBatchUpdate{{ entity_name|replace('Entity', '') }}() {
        logger.info("开始执行测试批量更新{{ entity_name|replace('Entity', '') }}");
        
        // 创建测试数据
        List<{{ entity_name }}> entities = new ArrayList<>();
        
        {{ entity_name }} entity1 = new {{ entity_name }}();
        // 设置测试数据
        // entity1.setXXX(XXX);
        entities.add(entity1);
        
        // 模拟返回值
        when({{ service_name|lower|replace('service', '') }}Service.batchUpdate{{ entity_name|replace('Entity', '') }}(entities)).thenReturn(true);
        
        boolean result = {{ service_name|lower|replace('service', '') }}Service.batchUpdate{{ entity_name|replace('Entity', '') }}(entities);
        assertTrue(result);
        
        // 验证方法调用
        verify({{ service_name|lower|replace('service', '') }}Service, times(1)).batchUpdate{{ entity_name|replace('Entity', '') }}(entities);
        
        logger.info("测试批量更新{{ entity_name|replace('Entity', '') }}执行完成");
    }

    /**
     * 测试分页查询{{ entity_name|replace('Entity', '') }}
     */
    @Test
    public void testPage{{ entity_name|replace('Entity', '') }}() {
        logger.info("开始执行测试分页查询{{ entity_name|replace('Entity', '') }}");
        
        {{ entity_name|replace('Entity','PageDTO') }} dto = new {{ entity_name|replace('Entity','PageDTO') }}();
        dto.setPage(1);
        dto.setSize(10);
        PageResult<{{ entity_name|replace('Entity','DTO') }}> mockResult = new PageResult<>();
        mockResult.setRecords(new ArrayList<{{ entity_name|replace('Entity','DTO') }}>());
        mockResult.setPage(1);
        mockResult.setSize(10);
        when({{ service_name|lower|replace('service', '') }}Service.page{{ entity_name|replace('Entity', '') }}(dto)).thenReturn(mockResult);
        
        PageResult<{{ entity_name|replace('Entity','DTO') }}> pageResult = {{ service_name|lower|replace('service', '') }}Service.page{{ entity_name|replace('Entity', '') }}(dto);
        
        assertNotNull(pageResult);
        verify({{ service_name|lower|replace('service', '') }}Service, times(1)).page{{ entity_name|replace('Entity', '') }}(dto);
        logger.info("测试分页查询{{ entity_name|replace('Entity', '') }}执行完成");
    }
}
