---
name: db-generate
description: æ•°æ®åº“è¡¨ä»£ç ç”Ÿæˆå·¥å…·ï¼Œæ ¹æ®æ•°æ®åº“è¡¨ç»“æ„è‡ªåŠ¨ç”Ÿæˆå®ä½“ç±»ã€Mapperã€Serviceã€DTOã€ServiceImpl ç­‰åŸºç¡€ä»£ç ï¼Œå¹¶æä¾›ä»£ç éªŒè¯å’Œå•å…ƒæµ‹è¯•ç”ŸæˆåŠŸèƒ½ï¼ˆå½“å‰ç‰ˆæœ¬ä¸ç”Ÿæˆ Controllerï¼Œå¤–éƒ¨æš´éœ²ç”±å…¶ä»–æŠ€èƒ½è´Ÿè´£ï¼‰
metadata:
  emoji: "ğŸ—„ï¸"
  requires:
    - name: mysql
      type: binary
      description: MySQL å®¢æˆ·ç«¯å·¥å…·
    - name: java
      type: binary
      description: Java å¼€å‘ç¯å¢ƒ
    - name: maven
      type: binary
      description: Maven æ„å»ºå·¥å…·
  install:
    - name: mysql
      command: "ä¸‹è½½å¹¶å®‰è£… MySQL å®¢æˆ·ç«¯: https://dev.mysql.com/downloads/mysql/"
    - name: java
      command: "ä¸‹è½½å¹¶å®‰è£… JDK 8+: https://www.oracle.com/java/technologies/downloads/"
    - name: maven
      command: "ä¸‹è½½å¹¶å®‰è£… Maven: https://maven.apache.org/download.cgi"
  examples:
    - name: ç”Ÿæˆå•ä¸ªè¡¨çš„ä»£ç 
      command: "python db_generate.py --table t_scf_financing_order --output-dir scf-loan-dal/src/main/java"
    - name: ç”Ÿæˆå¤šä¸ªè¡¨çš„ä»£ç 
      command: "python db_generate.py --tables t_scf_financing_order,t_scf_repayment_plan --output-dir scf-loan-dal/src/main/java"
    - name: ç”Ÿæˆå®Œæ•´æ¨¡å—ä»£ç 
      command: "python db_generate.py --table t_scf_financing_order --output-dir . --full-module"
    - name: ç”Ÿæˆä»£ç å¹¶éªŒè¯
      command: "python db_generate.py --table t_scf_financing_order --validate"
    - name: ç”Ÿæˆå•å…ƒæµ‹è¯•
      command: "python db_generate.py --table t_scf_financing_order --generate-tests"
  tags:
    - database
    - code-generation
    - java
    - mybatis-plus
    - validation
    - unit-test
  author: scf-team
  version: "1.0.0"
  category: development
  platforms:
    - windows
    - macos
    - linux
  support:
    issues: "https://github.com/scf-team/scf-loan/issues"
    email: "support@scf-team.com"
  license:
    name: MIT
    url: "https://opensource.org/licenses/MIT"
  privacy:
    policy: "æœ¬å·¥å…·ä»…åœ¨æœ¬åœ°è¿è¡Œï¼Œä¸æ”¶é›†ä»»ä½•æ•°æ®"
    compliance: "ç¬¦åˆ GDPR å’Œå…¶ä»–æ•°æ®ä¿æŠ¤æ³•è§„"
  security:
    vulnerabilities: "æ— å·²çŸ¥æ¼æ´"
    best_practices: "ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼Œé¿å… SQL æ³¨å…¥"
  dependencies:
    - name: pymysql
      version: "^1.0.2"
    - name: jinja2
      version: "^3.0.3"
    - name: click
      version: "^8.0.4"
    - name: pycodestyle
      version: "^2.8.0"
  configuration:
    - name: db_url
      type: string
      description: æ•°æ®åº“è¿æ¥ URL
      required: true
    - name: db_username
      type: string
      description: æ•°æ®åº“ç”¨æˆ·å
      required: true
    - name: db_password
      type: string
      description: æ•°æ®åº“å¯†ç 
      required: true
    - name: base_package
      type: string
      description: åŸºç¡€åŒ…å
      default: "com.scf.loan"
    - name: output_dir
      type: string
      description: è¾“å‡ºç›®å½•
      default: "."
    - name: validate_code
      type: boolean
      description: æ˜¯å¦éªŒè¯ç”Ÿæˆçš„ä»£ç 
      default: false
    - name: generate_tests
      type: boolean
      description: æ˜¯å¦ç”Ÿæˆå•å…ƒæµ‹è¯•
      default: false
  usage:
    - step: "é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯"
      command: "åœ¨ config.yml ä¸­è®¾ç½®æ•°æ®åº“è¿æ¥å‚æ•°"
    - step: "è¿è¡Œä»£ç ç”Ÿæˆå·¥å…·"
      command: "python db_generate.py --table <table_name>"
    - step: "éªŒè¯ç”Ÿæˆçš„ä»£ç "
      command: "python db_generate.py --table <table_name> --validate"
    - step: "ç”Ÿæˆå•å…ƒæµ‹è¯•"
      command: "python db_generate.py --table <table_name> --generate-tests"
    - step: "æŸ¥çœ‹ç”Ÿæˆçš„ä»£ç "
      command: "æ£€æŸ¥è¾“å‡ºç›®å½•ä¸­çš„ç”Ÿæˆæ–‡ä»¶"
    - step: "é›†æˆåˆ°é¡¹ç›®ä¸­"
      command: "å°†ç”Ÿæˆçš„ä»£ç å¤åˆ¶åˆ°å¯¹åº”æ¨¡å—"
  limitations:
    - "ä»…æ”¯æŒ MySQL æ•°æ®åº“"
    - "ä»…æ”¯æŒ MyBatis Plus æ¡†æ¶"
    - "å¤æ‚çš„è¡¨å…³ç³»å¯èƒ½éœ€è¦æ‰‹åŠ¨è°ƒæ•´"
    - "ä½¿ç”¨ --ddl å‚æ•°æ—¶ï¼ŒDDL æ–‡ä»¶å¿…é¡»æŒ‰è¡Œå®šä¹‰åˆ—ï¼Œæ¯åˆ—å®šä¹‰å ä¸€è¡Œ"
    - "DDL æ–‡ä»¶ä¸­çš„æ³¨é‡Šå¿…é¡»ä½¿ç”¨å•å¼•å·æˆ–åŒå¼•å·åŒ…å›´"
    - "DDL æ–‡ä»¶ä¸­çš„ç´¢å¼•å®šä¹‰å¿…é¡»å•ç‹¬å ä¸€è¡Œ"
    - "DDL æ–‡ä»¶ä¸­çš„è¡¨çº§é…ç½®ï¼ˆå¦‚ ENGINEã€DEFAULT CHARSET ç­‰ï¼‰å¿…é¡»å•ç‹¬å ä¸€è¡Œ"
  troubleshooting:
    - problem: "æ•°æ®åº“è¿æ¥å¤±è´¥"
      solution: "æ£€æŸ¥æ•°æ®åº“è¿æ¥å‚æ•°å’Œç½‘ç»œè¿æ¥"
    - problem: "ç”Ÿæˆçš„ä»£ç ç¼–è¯‘é”™è¯¯"
      solution: "æ£€æŸ¥ Java ç¯å¢ƒå’Œä¾èµ–é…ç½®"
    - problem: "è¡¨ç»“æ„ä¸å­˜åœ¨"
      solution: "ç¡®ä¿æŒ‡å®šçš„è¡¨åœ¨æ•°æ®åº“ä¸­å­˜åœ¨"
    - problem: "ä»£ç éªŒè¯å¤±è´¥"
      solution: "æ ¹æ®éªŒè¯é”™è¯¯ä¿¡æ¯ä¿®æ”¹ä»£ç "
  changelog:
    - version: "1.0.0"
      date: "2026-02-04"
      changes:
        - "åˆå§‹ç‰ˆæœ¬ï¼Œæ”¯æŒåŸºæœ¬çš„ä»£ç ç”ŸæˆåŠŸèƒ½"
        - "æ”¯æŒ MySQL æ•°æ®åº“è¡¨ç»“æ„è§£æ"
        - "ç”Ÿæˆå®ä½“ç±»ã€Mapperã€Serviceã€DTOã€ServiceImpl ä»£ç "
        - "æ·»åŠ ä»£ç éªŒè¯åŠŸèƒ½"
        - "æ·»åŠ å•å…ƒæµ‹è¯•ç”ŸæˆåŠŸèƒ½"
  generated-files:
    header-policy: |
      æ‰€æœ‰ç”±æœ¬æŠ€èƒ½è‡ªåŠ¨ç”Ÿæˆçš„ Java æ–‡ä»¶ä¼šåœ¨æ–‡ä»¶å¤´éƒ¨æ’å…¥ç»Ÿä¸€æ³¨é‡Šï¼ŒåŒ…å«ï¼š
      - ç”Ÿæˆæ¥æºï¼šGenerated by skill: db-generate
      - ç‰ˆæœ¬ä¸æ—¶é—´ï¼š@version <æŠ€èƒ½ç‰ˆæœ¬>ï¼Œ@since <ç”Ÿæˆæ—¶é—´>
      - ä¿®æ”¹å‘Šè­¦ï¼šDo not modify directlyï¼›å¦‚éœ€ä¿®æ”¹ï¼Œè¯·åœ¨æ³¨é‡Šä¸­è¡¥å…… @versionã€@since ä»¥åŠè¯¦ç»†å˜æ›´è¯´æ˜ï¼Œå¹¶ä¼˜å…ˆé€šè¿‡æŠ€èƒ½å†ç”Ÿ
    environment:
      - name: SCF_SKILL_VERSION
        description: è¦†ç›–æ³¨é‡Šä¸­çš„æŠ€èƒ½ç‰ˆæœ¬å·ï¼Œé»˜è®¤ "1.0.0"
    rationale: |
      é€šè¿‡å¼ºåˆ¶æ–‡ä»¶å¤´æ ‡è¯†ï¼Œç¡®ä¿åç»­ç»´æŠ¤è€…æ¸…æ¥šä»£ç æ¥æºä¸å†ç”Ÿäº§è·¯å¾„ï¼Œå‡å°‘æ‰‹æ”¹å¯¼è‡´çš„åå·®ï¼›å¦‚ç¡®éœ€æ‰‹æ”¹ï¼Œè¦æ±‚åœ¨æ³¨é‡Šè¿›è¡Œå……åˆ†è®°å½•ä¸ç‰ˆæœ¬æ ‡æ³¨ã€‚
    files:
      - module: scf-loan-dal
        paths:
          - src/main/java/com/scf/loan/dal/entity/<Entity>.java
          - src/main/java/com/scf/loan/dal/mapper/<Mapper>.java
      - module: scf-loan-biz
        paths:
          - src/main/java/com/scf/loan/biz/service/<Service>.java
          - src/main/java/com/scf/loan/biz/service/impl/<ServiceImpl>.java
      - module: scf-loan-common
        paths:
          - src/main/java/com/scf/loan/common/dto/<DTO>.java
          - src/main/java/com/scf/loan/common/dto/<PageDTO>.java
