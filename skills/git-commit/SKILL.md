# Git 提交代码技能

## 技能描述

该技能用于自动化执行 Git 代码提交流程，包括代码检查、单元测试执行、编译验证、改动点总结和最终提交。

## 功能特性

- 自动检查项目状态和改动文件
- 执行所有单元测试，确保测试通过
- 验证项目编译是否正常
- 自动生成改动点总结，作为提交信息的一部分
- 支持自定义提交信息
- 提供详细的执行日志

## 使用方法

### 基本用法

```bash
python git_commit.py --message "提交信息"
```

### 参数说明

- `--message`, `-m`：提交信息，必填
- `--branch`, `-b`：分支名称，默认使用当前分支
- `--skip-tests`：跳过单元测试，默认不跳过
- `--skip-build`：跳过编译验证，默认不跳过
- `--verbose`：详细输出日志，默认不输出

## 执行流程

1. **初始化**：加载配置，检查 Git 环境
2. **状态检查**：检查项目状态，获取改动文件列表
3. **代码检查**：执行代码质量检查（如果配置）
4. **单元测试**：执行所有单元测试，确保测试通过
5. **编译验证**：执行项目编译，确保编译通过
6. **改动分析**：分析改动文件，生成改动点总结
7. **提交准备**：准备提交信息，包含改动点总结
8. **执行提交**：执行 Git 提交操作
9. **结果反馈**：输出提交结果和相关信息

## 配置文件

技能使用 `config.yml` 配置文件，支持以下配置项：

- `git`：Git 相关配置
- `maven`：Maven 相关配置
- `tests`：测试相关配置
- `build`：编译相关配置
- `commit`：提交相关配置

## 注意事项

1. 确保项目已经初始化 Git 仓库
2. 确保 Maven 环境配置正确
3. 确保所有必要的依赖已经安装
4. 提交前请确保代码已经经过本地测试
5. 对于大型项目，执行测试和编译可能需要较长时间

## 示例

### 示例 1：基本提交

```bash
python git_commit.py --message "添加新功能：用户认证模块"
```

### 示例 2：跳过测试（仅用于紧急修复）

```bash
python git_commit.py --message "紧急修复：修复登录接口错误" --skip-tests
```

### 示例 3：详细输出

```bash
python git_commit.py --message "优化：提高系统性能" --verbose
```

## 常见问题

1. **Git 仓库未初始化**：请先执行 `git init` 初始化仓库
2. **Maven 环境配置错误**：请检查 Maven 安装和配置
3. **测试失败**：请修复测试失败的问题后再提交
4. **编译失败**：请修复编译错误后再提交
5. **权限不足**：请确保有足够的权限执行 Git 操作

## 依赖

- Python 3.6+
- Git
- Maven 3.6+
- PyYAML
- Click
